function [A,B1,C,D] = derivada(t,x,y,u)
Irr1 = 10;
Irr2 = 20;
Irr3 = 30;

I1 = 10;
I2 = 20;
I3 = 30;

Kt = 5;

B = 50;
A = [[0,0,0,1,0,0,0,0,0],
    [0,0,0,0,1,0,0,0,0],
    [0,0,0,0,0,1,0,0,0],
    [(2*I3*Kt*cot(x(3))*(I2*u(1)*cos(x(1))-I1*u(2)*sin(x(1)))-2*I3*Irr3*x(6)*x(9)*cot(x(3))*(-2*I1*cos(x(1))*sin(x(1))+2*I2*cos(x(1))*sin(x(1)))+x(6)*(2*I1*I2*(-I1+I2)*x(6)*cos(2*x(1))-2*(I1-I2)*(I1+I2-I3)*I3*x(4)*cot(x(3))*sin(2*x(1)))+(x(5)*(4*(I1-I2)*I3*((I1+I2-I3)*x(4)-Irr3*x(9))*cos(2*x(1))*cos(x(3))-2*(I1-I2)*x(6)*(2*I1*I2+(I1+I2)*I3-I3^2+(-2*I1*I2+(I1+I2)*I3-I3^2)*cos(2*x(3)))*csc(x(3))*sin(2*x(1))))/2+2*(I1-I2)*x(5)^2*cos(2*x(1))*((I1-I3)*(I2-I3)+(I1+I2-I3)*I3*csc(x(3))^2)*sin(x(3))^2+2*x(7)*(-(I1*I2*Irr1*x(6)*cos(x(1)))-B*I2*I3*cos(x(1))*cot(x(3))-I1*Irr1*sin(x(1))*(I3*x(4)*cot(x(3))+x(5)*(I2-I3+I3*csc(x(3))^2)*sin(x(3))))+x(8)*(2*B*I1*I3*cot(x(3))*sin(x(1))-2*I2*Irr2*(-(I1*x(6)*sin(x(1)))+cos(x(1))*(I3*x(4)*cot(x(3))+x(5)*(I3*cos(x(3))*cot(x(3))+I1*sin(x(3)))))))/(2*I1*I2*I3),0,(-(I3*x(4)*x(6)*((I1-I2)^2-(I1+I2)*I3+(I1-I2)*(I1+I2-I3)*cos(2*x(1)))*csc(x(3))^2)-2*I3*Kt*csc(x(3))^2*(I1*u(2)*cos(x(1))+I2*u(1)*sin(x(1)))+2*x(7)*(I1*Irr1*cos(x(1))*(-2*I3*x(5)*cot(x(3))*csc(x(3))-I3*x(4)*csc(x(3))^2+x(5)*cos(x(3))*(I2-I3+I3*csc(x(3))^2))+B*I2*I3*csc(x(3))^2*sin(x(1)))+x(8)*(2*B*I1*I3*cos(x(1))*csc(x(3))^2-2*I2*Irr2*(-(I3*x(4)*csc(x(3))^2)+x(5)*(I1*cos(x(3))-I3*cos(x(3))-I3*cot(x(3))*csc(x(3))))*sin(x(1)))+2*I3*Irr3*x(6)*x(9)*csc(x(3))^2*(I1*cos(x(1))^2+I2*sin(x(1))^2)-2*(I1-I2)*(I1+I2-I3)*I3*x(5)^2*cot(x(3))*sin(2*x(1))+2*(I1-I2)*x(5)^2*cos(x(3))*((I1-I3)*(I2-I3)+(I1+I2-I3)*I3*csc(x(3))^2)*sin(2*x(1))*sin(x(3))+(x(5)*(-(I3*x(6)*(I1^2+4*I1*I2+I2^2-(I1+I2)*I3+(I1^2+I2^2-(I1+I2)*I3)*cos(2*x(3)))*cot(x(3))*csc(x(3)))-(I1-I2)*x(6)*cos(2*x(1))*(2*I1*I2+(I1+I2)*I3-I3^2+(-2*I1*I2+(I1+I2)*I3-I3^2)*cos(2*x(3)))*cot(x(3))*csc(x(3))-2*(I1-I2)*I3*((I1+I2-I3)*x(4)-Irr3*x(9))*sin(2*x(1))*sin(x(3))-2*I3*(I1^2+I2^2-(I1+I2)*I3)*x(6)*csc(x(3))*sin(2*x(3))-2*(I1-I2)*(-2*I1*I2+(I1+I2)*I3-I3^2)*x(6)*cos(2*x(1))*csc(x(3))*sin(2*x(3))))/2)/(2*I1*I2*I3),(2*I1*I3*Irr1*x(7)*cos(x(1))*cot(x(3))+I3*x(6)*((I1-I2)^2-(I1+I2)*I3+(I1-I2)*(I1+I2-I3)*cos(2*x(1)))*cot(x(3))-2*I2*I3*Irr2*x(8)*cot(x(3))*sin(x(1))+(I1-I2)*(I1+I2-I3)*I3*x(5)*cos(x(3))*sin(2*x(1)))/(2*I1*I2*I3),((I3*x(6)*(I1^2+4*I1*I2+I2^2-(I1+I2)*I3+(I1^2+I2^2-(I1+I2)*I3)*cos(2*x(3)))*csc(x(3))+(I1-I2)*x(6)*cos(2*x(1))*(2*I1*I2+(I1+I2)*I3-I3^2+(-2*I1*I2+(I1+I2)*I3-I3^2)*cos(2*x(3)))*csc(x(3))+2*(I1-I2)*I3*((I1+I2-I3)*x(4)-Irr3*x(9))*cos(x(3))*sin(2*x(1)))/2+2*I1*Irr1*x(7)*cos(x(1))*(I2-I3+I3*csc(x(3))^2)*sin(x(3))+2*(I1-I2)*x(5)*((I1-I3)*(I2-I3)+(I1+I2-I3)*I3*csc(x(3))^2)*sin(2*x(1))*sin(x(3))^2-2*I2*Irr2*x(8)*sin(x(1))*(I3*cos(x(3))*cot(x(3))+I1*sin(x(3))))/(2*I1*I2*I3),(-2*I1*I2*Irr2*x(8)*cos(x(1))+I3*x(4)*((I1-I2)^2-(I1+I2)*I3+(I1-I2)*(I1+I2-I3)*cos(2*x(1)))*cot(x(3))+(x(5)*(I3*(I1^2+4*I1*I2+I2^2-(I1+I2)*I3+(I1^2+I2^2-(I1+I2)*I3)*cos(2*x(3)))*csc(x(3))+(I1-I2)*cos(2*x(1))*(2*I1*I2+(I1+I2)*I3-I3^2+(-2*I1*I2+(I1+I2)*I3-I3^2)*cos(2*x(3)))*csc(x(3))))/2-2*I1*I2*Irr1*x(7)*sin(x(1))-2*I3*Irr3*x(9)*cot(x(3))*(I1*cos(x(1))^2+I2*sin(x(1))^2)+2*I1*I2*(-I1+I2)*x(6)*sin(2*x(1)))/(2*I1*I2*I3),(-(I1*I2*Irr1*x(6)*sin(x(1)))-B*I2*I3*cot(x(3))*sin(x(1))+I1*Irr1*cos(x(1))*(I3*x(4)*cot(x(3))+x(5)*(I2-I3+I3*csc(x(3))^2)*sin(x(3))))/(I1*I2*I3),(-2*B*I1*I3*cos(x(1))*cot(x(3))-2*I2*Irr2*(I1*x(6)*cos(x(1))+sin(x(1))*(I3*x(4)*cot(x(3))+x(5)*(I3*cos(x(3))*cot(x(3))+I1*sin(x(3))))))/(2*I1*I2*I3),(2*(B*I1*I2-I3*Irr3*x(6)*cot(x(3))*(I1*cos(x(1))^2+I2*sin(x(1))^2))-(I1-I2)*I3*Irr3*x(5)*cos(x(3))*sin(2*x(1)))/(2*I1*I2*I3)],
    [-(4*(I1-I2)*x(5)*cos(2*x(1))*(-(Irr3*x(9))+(I1+I2-I3)*(x(4)+x(5)*cos(x(3))))-4*I2*cos(x(1))*(-(u(1)*Kt)+B*x(7)+Irr2*x(8)*(x(4)+x(5)*cos(x(3))))*csc(x(3))-2*I1*(u(2)*Kt-B*x(8)+Irr1*x(7)*(x(4)+x(5)*cos(x(3))))*csc(x(3)/2)*sec(x(3)/2)*sin(x(1))-2*(I1-I2)*x(6)*(-(Irr3*x(9))+(I1+I2-I3)*(x(4)+x(5)*cos(x(3))))*csc(x(3)/2)*sec(x(3)/2)*sin(2*x(1)))/(4*I1*I2),0,-(-2*(I1+I2)*(I1+I2-I3)*x(5)*x(6)-((I1-I2)*x(6)*cos(2*x(1))*(-(Irr3*x(9))+(I1+I2-I3)*(x(4)+x(5)*cos(x(3))))*csc(x(3)/2)^2)/2-I1*cos(x(1))*(u(2)*Kt-B*x(8)+Irr1*x(7)*(x(4)+x(5)*cos(x(3))))*csc(x(3)/2)^2+2*x(6)*((-(I1-I2)^2+(I1+I2)*I3)*x(4)+(I1+I2)*Irr3*x(9)-(I1+I2)*(I1+I2-I3)*x(5)*cos(x(3)))*cot(x(3))*csc(x(3))+((I1-I2)*x(6)*cos(2*x(1))*(-(Irr3*x(9))+(I1+I2-I3)*(x(4)+x(5)*cos(x(3))))*sec(x(3)/2)^2)/2+I1*cos(x(1))*(u(2)*Kt-B*x(8)+Irr1*x(7)*(x(4)+x(5)*cos(x(3))))*sec(x(3)/2)^2+4*I2*Irr2*x(5)*x(8)*sin(x(1))+4*I2*(-(u(1)*Kt)+B*x(7)+Irr2*x(8)*(x(4)+x(5)*cos(x(3))))*cot(x(3))*csc(x(3))*sin(x(1))-2*I1*Irr1*x(5)*x(7)*cos(x(1))*csc(x(3)/2)*sec(x(3)/2)*sin(x(3))-(I1-I2)*(I1+I2-I3)*x(5)*x(6)*cos(2*x(1))*csc(x(3)/2)*sec(x(3)/2)*sin(x(3))-2*(I1-I2)*(I1+I2-I3)*x(5)^2*sin(2*x(1))*sin(x(3)))/(4*I1*I2),-(-2*(-(I1-I2)^2+(I1+I2)*I3)*x(6)*csc(x(3))+2*I1*Irr1*x(7)*cos(x(1))*csc(x(3)/2)*sec(x(3)/2)+(I1-I2)*(I1+I2-I3)*x(6)*cos(2*x(1))*csc(x(3)/2)*sec(x(3)/2)-4*I2*Irr2*x(8)*csc(x(3))*sin(x(1))+2*(I1-I2)*(I1+I2-I3)*x(5)*sin(2*x(1)))/(4*I1*I2),-(2*(I1+I2)*(I1+I2-I3)*x(6)*cot(x(3))+2*I1*Irr1*x(7)*cos(x(1))*cos(x(3))*csc(x(3)/2)*sec(x(3)/2)+(I1-I2)*(I1+I2-I3)*x(6)*cos(2*x(1))*cos(x(3))*csc(x(3)/2)*sec(x(3)/2)-4*I2*Irr2*x(8)*cot(x(3))*sin(x(1))+2*(I1-I2)*(I1+I2-I3)*x(5)*cos(x(3))*sin(2*x(1))+2*(I1-I2)*(-(Irr3*x(9))+(I1+I2-I3)*(x(4)+x(5)*cos(x(3))))*sin(2*x(1)))/(4*I1*I2),-(-2*((-(I1-I2)^2+(I1+I2)*I3)*x(4)+(I1+I2)*Irr3*x(9)-(I1+I2)*(I1+I2-I3)*x(5)*cos(x(3)))*csc(x(3))+(I1-I2)*cos(2*x(1))*(-(Irr3*x(9))+(I1+I2-I3)*(x(4)+x(5)*cos(x(3))))*csc(x(3)/2)*sec(x(3)/2))/(4*I1*I2),-(2*I1*Irr1*cos(x(1))*(x(4)+x(5)*cos(x(3)))*csc(x(3)/2)*sec(x(3)/2)-4*B*I2*csc(x(3))*sin(x(1)))/(4*I1*I2),-(-2*B*I1*cos(x(1))*csc(x(3)/2)*sec(x(3)/2)-4*I2*Irr2*(x(4)+x(5)*cos(x(3)))*csc(x(3))*sin(x(1)))/(4*I1*I2),-(-2*(I1+I2)*Irr3*x(6)*csc(x(3))-(I1-I2)*Irr3*x(6)*cos(2*x(1))*csc(x(3)/2)*sec(x(3)/2)-2*(I1-I2)*Irr3*x(5)*sin(2*x(1)))/(4*I1*I2)],
    [(sin(x(1))*(I2*u(1)*Kt*csc(x(1))^2-B*I2*x(7)*csc(x(1))^2-I2*Irr2*x(8)*(x(4)+x(5)*cos(x(3)))*csc(x(1))^2-(I1-I2)*x(6)*((I1+I2-I3)*x(4)-Irr3*x(9))*sin(x(1))+x(5)^2*cos(x(1))*cos(x(3))*(I1*(I1-I3)+I2*(I2-I3)*cot(x(1))^2)*sin(x(3))-2*I2*(I2-I3)*x(5)^2*cos(x(3))*cot(x(1))*csc(x(1))*sin(x(3))+x(5)*(-((I1-I2)*(I1+I2-I3)*x(6)*cos(x(3))*sin(x(1)))+(I1-I2)*((I1+I2-I3)*x(4)-Irr3*x(9))*cos(x(1))*sin(x(3))-I2*(-((I1-I2+I3)*x(4))-Irr3*x(9))*cot(x(1))*csc(x(1))*sin(x(3)))))/(I1*I2)+(cos(x(1))*((I1-I2)*x(6)*((I1+I2-I3)*x(4)-Irr3*x(9))*cos(x(1))+x(7)*(I1*Irr1*(x(4)+x(5)*cos(x(3)))+B*I2*cot(x(1)))+Kt*(I1*u(2)-I2*u(1)*cot(x(1)))+x(8)*(-(B*I1)+I2*Irr2*(x(4)+x(5)*cos(x(3)))*cot(x(1)))+x(5)^2*cos(x(3))*(I1*(I1-I3)+I2*(I2-I3)*cot(x(1))^2)*sin(x(1))*sin(x(3))+x(5)*((I1-I2)*(I1+I2-I3)*x(6)*cos(x(1))*cos(x(3))+I2*(-((I1-I2+I3)*x(4))-Irr3*x(9))*csc(x(1))*sin(x(3))+(I1-I2)*((I1+I2-I3)*x(4)-Irr3*x(9))*sin(x(1))*sin(x(3)))))/(I1*I2),0,(sin(x(1))*(x(5)^2*cos(x(3))^2*(I1*(I1-I3)+I2*(I2-I3)*cot(x(1))^2)*sin(x(1))-I1*Irr1*x(5)*x(7)*sin(x(3))-I2*Irr2*x(5)*x(8)*cot(x(1))*sin(x(3))-x(5)^2*(I1*(I1-I3)+I2*(I2-I3)*cot(x(1))^2)*sin(x(1))*sin(x(3))^2+x(5)*(I2*(-((I1-I2+I3)*x(4))-Irr3*x(9))*cos(x(3))*csc(x(1))+(I1-I2)*((I1+I2-I3)*x(4)-Irr3*x(9))*cos(x(3))*sin(x(1))-(I1-I2)*(I1+I2-I3)*x(6)*cos(x(1))*sin(x(3)))))/(I1*I2),(sin(x(1))*(I1*Irr1*x(7)+(I1-I2)*(I1+I2-I3)*x(6)*cos(x(1))+I2*Irr2*x(8)*cot(x(1))+x(5)*(I2*(-I1+I2-I3)*csc(x(1))*sin(x(3))+(I1-I2)*(I1+I2-I3)*sin(x(1))*sin(x(3)))))/(I1*I2),(sin(x(1))*(I1*Irr1*x(7)*cos(x(3))+(I1-I2)*(I1+I2-I3)*x(6)*cos(x(1))*cos(x(3))+I2*Irr2*x(8)*cos(x(3))*cot(x(1))+I2*(-((I1-I2+I3)*x(4))-Irr3*x(9))*csc(x(1))*sin(x(3))+(I1-I2)*((I1+I2-I3)*x(4)-Irr3*x(9))*sin(x(1))*sin(x(3))+2*x(5)*cos(x(3))*(I1*(I1-I3)+I2*(I2-I3)*cot(x(1))^2)*sin(x(1))*sin(x(3))))/(I1*I2),(((I1-I2)*((I1+I2-I3)*x(4)-Irr3*x(9))*cos(x(1))+(I1-I2)*(I1+I2-I3)*x(5)*cos(x(1))*cos(x(3)))*sin(x(1)))/(I1*I2),((I1*Irr1*(x(4)+x(5)*cos(x(3)))+B*I2*cot(x(1)))*sin(x(1)))/(I1*I2),((-(B*I1)+I2*Irr2*(x(4)+x(5)*cos(x(3)))*cot(x(1)))*sin(x(1)))/(I1*I2),(sin(x(1))*(-((I1-I2)*Irr3*x(6)*cos(x(1)))+x(5)*(-(I2*Irr3*csc(x(1))*sin(x(3)))-(I1-I2)*Irr3*sin(x(1))*sin(x(3)))))/(I1*I2)],
    [0,0,0,0,0,0,-(B/Irr1),0,0],
    [0,0,0,0,0,0,0,-(B/Irr2),0],
    [0,0,0,0,0,0,0,0,-(B/Irr3)]
    ];
B1 = A;
C = A;
D = A;
end
